% http://2017.splashcon.org/track/splash-2017-OOPSLA#Instructions-for-Authors
% "There is no page limit for bibliographic references and appendices,
% and, therefore, for the overall submission."

\section{Details of the corpus data set}
\label{app:corpus}

\begin{table}
\centering
\footnotesize
\begin{tabular}{lS[table-format=4]S[table-format=4]S[table-format=4]S[table-format=4]S[table-format=4]S[table-format=4]}
\hline
  & \multicolumn{2}{c}{Number of files}
  & \multicolumn{2}{c}{Lines of physical code}
  & \multicolumn{2}{c}{Lines of raw code} \\
%%
  Package   & {Total} & {Parsed}& {\hspace{2em}Total} & {Parsed} & {\hspace{2em}Total} & {Parsed}  \\ % braces prevent headers from being formatted as numbers
  \hline
%%%
  ARPACK-NG & \SSArpackFiles & \SSArpackFilesParsed & \SSArpackLoC &
\SSArpackLoCParsed & \SSArpackLoCRaw & \SSArpackLoCParsedRaw \\
%%%
  BLAS & \SSBlasFiles & \SSBlasFilesParsed &
\SSBlasLoC & \SSBlasLoCParsed & \SSBlasLoCRaw & \SSBlasLoCParsedRaw \\
%%%
  Cliffs & \SSCliffsFiles & \SSCliffsFilesParsed & \SSCliffsLoC &
\SSCliffsLoCParsed & \SSCliffsLoCRaw & \SSCliffsLoCParsedRaw \\
%%%
  CP & \SSCPFiles & \SSCPFilesParsed & \SSCPLoC & \SSCPLoCParsed &
\SSCPLoCRaw & \SSCPLoCParsedRaw \\
%%%
  E3ME & \SSEThreeMEFiles & \SSEThreeMEFilesParsed & \SSEThreeMELoC &
\SSEThreeMELoCParsed & \SSEThreeMELoCRaw & \SSEThreeMELoCParsedRaw \\
%%%
  GEOS-Chem &
\SSgeosChemFiles & \SSgeosChemFilesParsed & \SSgeosChemLoC &
\SSgeosChemLoCParsed & \SSgeosChemLoCRaw & \SSgeosChemLoCParsedRaw \\
%%%
  Hybrid4 & \SShybridFiles & \SShybridFilesParsed & \SShybridLoC &
\SShybridLoCParsed & \SShybridLoCRaw & \SShybridLoCParsedRaw \\
%%%
  mudpack & \SSmudpackFiles & \SSmudpackFilesParsed & \SSmudpackLoC &
\SSmudpackLoCParsed & \SSmudpackLoCRaw & \SSmudpackLoCParsedRaw \\
%%
  Navier & \SSnavierFiles & \SSnavierFilesParsed & \SSnavierLoC &
\SSnavierLoCParsed & \SSnavierLoCRaw & \SSnavierLoCParsedRaw \\
%%
  Specfem3D & \SSspecfemFiles & \SSspecfemFilesParsed & \SSspecfemLoC &
\SSspecfemLoCParsed & \SSspecfemLoCRaw & \SSspecfemLoCParsedRaw \\
%%
  UM &
\SSumFiles & \SSumFilesParsed & \SSumLoC & \SSumLoCParsed &
\SSumLoCRaw & \SSumLoCParsedRaw \\ \hline
%%% TOTAL
  \textbf{Total} & \SSFiles &
\SSFilesParsed & \SSLoC & \SSLoCParsed & \SSLoCRaw & \SSLoCParsedRaw
\end{tabular}
\caption{Summary of software packages used for
  evaluation\label{tab:corpus}}
\vspace{-1em}
\end{table}


\paragraph{Software Corpus}
Table~\ref{tab:corpus} shows summary statistics of the software
packages used in our evaluation, all of which are written in Fortran
90 or Fortran 77. In total we analysed \SI{\overallLoC} lines of code
from \numPackages{} packages, of which we successfully parsed
\SI{\overalllinesParsed} lines. The ``Number of files'' column shows
how many files in each corpus that we were able to analyse with
CamFort. The most common reasons for CamFort rejecting a file were
either use of a C-preprocessor, or illegal use of language features
from a modern Fortran variant.

\begin{enumerate}
\item \textbf{The Unified Model}~\cite{um} is a weather
  forecasting and climate modelling tool developed by the Met Office
  in the United Kingdom. It is used by research organisations and
  meteorological services around the world. We use the development
  branch (trunk) of the model. The code base in closed source but
  institutional licenses are available for research purposes. The Met
  Office runs a comprehensive code quality system incorporating
  dedicated committers (we counted 11) for particular parts of the
  model. We counted 120 additional contributors whose submissions are
  reviewed and tested before being accepted into the code base.

\item \textbf{E3MG} (An Energy-Environment-Economy (E3) Model at the Global
Level) is a macroeconomic model used for assessment of environmental
policy~\cite{RePEc:aen:journl:2006se-a12}. This was developed by
Cambridge Econometrics, an independent consultancy company.

\item \textbf{BLAS}~\cite{blas} (Basic Linear Algebra Subprograms) is
  a popular library providing efficient and portable routines for
  vector and matrix operations. These routines feature in many other
  libraries (including LAPACK). We used version 3.6.0. We chose to
  include this package for breadth, as it provides general numerical
  functions rather than a specialised scientific model.

\item \textbf{Hybrid4} is a vegetation and biomass model for
  simulating carbon, water and nitrogen flows~\cite{GBC:GBC635}.

\item \textbf{GEOS-Chem}~\cite{geos-chem} is a three-dimensional model
  of tropospheric chemistry developed at Harvard and used by $\sim$70
  universities and research institutions world-wide. We use v.10-01.

\item \textbf{Navier} is a small numerical simulation, giving a
  discrete approximation to the two-dimensional Navier-Stokes fluid
  equations, based on the book of~\citet{griebel1997numerical}.

\item \textbf{CP} consists of the example code from the second edition
  of the book ``Computational
  Physics''~\cite{giordano1997computational} introducing numerical
  techniques and their application to modern physics problems such as
  fields, waves, statistical mechanics and quantum mechanics.

\item \textbf{ARPACK-NG} is an open-source library for solving large-scale
eigenvalue problems~\cite{arpackng}.

\item \textbf{SPECFEM3D} is a global seismic wave models
  ~\cite{specfem3d}.

\item \textbf{MUDPACK} is a general multi-grid solver for elliptical
partial differentials~\cite{MUD};

\item \textbf{Cliffs} is a parallelised tsunami
  model~\cite{tolkova2014land}
\end{enumerate}


\section{Proofs and extended definitions for the model}
\label{sec:proofs}

\input{proofs}
